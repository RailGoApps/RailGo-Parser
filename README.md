# <center>RailGo.Parser</center>
RailGo 后端爬虫主代码。

> **本程序不是抢票的！不是抢票的！不是抢票的！**
> 
> 抢票的代码 Github 有的是，这个项目是**采集列车信息**用的，过去、现在、将来也不具备**任何**跟票务有关的功能！
>
> 请不要乱发issue！抢票有关issue一律close处理。

> 诚招更多有能力的铁路爱好者小伙伴参与开发。


### 内容
**railgo.parser**
- 车次信息
- 车次担当信息
- 车次交路分析
- 车站信息（拼音码、电报码、TMIS）

### 运行
安装依赖: `pip install -r requirements.txt`

启动核心: `python main.py`

### 存储
本软件使用 MongoDB 作为中间存储，但默认导出为适用 `RailGo` 软件的 SQLite 数据格式，存储在`./export/railgo.sqlite`下。

您可以参考 `railgo.parser.db.mongo_json` 结构，对接到您自己的存储方式下。

### FaQ
- 信息不全

    请保证网络畅通，否则列车列表可能出现**成片**缺失。

    > 本程序设计略为潦草，几乎没有错误处理，请保证一切条件正常再报issue！

- `ConnectionError: mPaaS Request Failed: XXX`
  
    可能12306接口改了或者是密钥动了，请发issue。

    如果代码是`1000`，则问题不在这里，请看看traceback，有可能是用`mPaaS`请求的其他地方出现了问题。

    ***注意***: 可能存在限速/封IP（根据过往经验多发于节假日等抢票高峰期），若出现`43003`，请适当增加延时。

- 大量 `车次XXXX出现空数据` 异常
  
    12306 存在一定数目的错误车次（如数据测试用的D083、兼容地方铁路的Y1等），这些车次是无法获得具体信息的。待修。

### 数据来源
- 12306 ( 核心数据 )
- ~~国铁吉讯 ( 核心数据 )~~ 因里程准确性极差已被移除。
- 95306 ( 核心数据 )
- ~~昆铁货运 ( 车站补充信息 )~~ 因车站代码信息时效性极差已被移除。
  
本程序采集的所有数据都是公开数据。

### 贡献
欢迎PR。

核心开发人员：
- @zlk-sys 
- @TKP30
- @mstouk57g

其余提供帮助的人士：
- @XieXiLin

### 参考
- http://www.ldbb.cn/news/7281.html